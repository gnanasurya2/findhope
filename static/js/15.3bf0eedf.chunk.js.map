{"version":3,"sources":["containers/Login.js","components/Loader.js","styles/CreateProfile.module.css"],"names":["Login","props","useState","email","setEmail","password","setPassword","loading","setLoading","history","useHistory","useEffect","sessionStorage","removeItem","className","styles","wrapper","loginBox","title","value","onChangeText","event","target","onClick","setItem","firebase","auth","signInWithEmailAndPassword","then","data","user","refreshToken","firestore","collection","where","get","querySnapshot","size","forEach","doc","JSON","stringify","name","id","push","catch","error","alert","message","Spin","keyframes","Load","styled","div","Loader","style","module","exports"],"mappings":"0MAyEeA,UAhED,SAACC,GAAW,IAAD,EACGC,qBADH,mBAChBC,EADgB,KACTC,EADS,OAESF,qBAFT,mBAEhBG,EAFgB,KAENC,EAFM,OAGOJ,oBAAS,GAHhB,mBAGhBK,EAHgB,KAGPC,EAHO,KAKjBC,EAAUC,cAChBC,qBAAU,WACRC,eAAeC,WAAW,WACzB,IAkCH,OACE,yBAAKC,UAAWC,IAAOC,SACrB,yBAAKF,UAAWC,IAAOE,UACrB,wCACA,kBAAC,IAAD,CACEC,MAAM,QACNC,MAAOhB,EACPiB,aAAc,SAACC,GAAD,OAAWjB,EAASiB,EAAMC,OAAOH,UAEjD,kBAAC,IAAD,CACED,MAAM,WACNC,MAAOd,EACPe,aAAc,SAACC,GAAD,OAAWf,EAAYe,EAAMC,OAAOH,UAEpD,kBAAC,IAAD,CAAQD,MAAOX,EAAU,GAAK,QAASgB,QA/CxB,WACnBf,GAAW,GACXI,eAAeY,QAAQ,QAASrB,GAChCsB,IACGC,OACAC,2BAA2BxB,EAAOE,GAClCuB,MAAK,SAACC,GACLjB,eAAeY,QAAQ,QAASK,EAAKC,KAAKC,cAC1CN,IACGO,YACAC,WAAW,aACXC,MAAM,QAAS,KAAM/B,GACrBgC,MACAP,MAAK,SAACQ,GACDA,EAAcC,MAChBD,EAAcE,SAAQ,SAACC,GACrB3B,eAAeY,QACb,OACAgB,KAAKC,UAAL,aAAiBC,KAAMH,EAAII,IAAOJ,EAAIV,aAG1CpB,EAAQmC,KAAK,eAEbnC,EAAQmC,KAAK,cAEfpC,GAAW,SAGhBqC,OAAM,SAACC,GACNC,MAAMD,EAAME,SACZxC,GAAW,QAkBRD,EAAU,kBAAC,IAAD,MAAa,U,kdC/DlC,IAAM0C,EAAOC,YAAH,KAKJC,EAAOC,IAAOC,IAAV,IAMKJ,GAKAK,IAFA,SAACrD,GAAD,OAAW,kBAACkD,EAAD,CAAMI,MAAOtD,EAAMsD,U,mBChB7CC,EAAOC,QAAU,CAAC,QAAU,+BAA+B,SAAW","file":"static/js/15.3bf0eedf.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport styles from \"../styles/CreateProfile.module.css\";\r\nimport Input from \"../components/Input\";\r\nimport Button from \"../components/PrimaryButton\";\r\nimport firebase from \"../helpers/firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\nimport Loader from \"../components/Loader\";\r\n\r\nconst Login = (props) => {\r\n  const [email, setEmail] = useState();\r\n  const [password, setPassword] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    sessionStorage.removeItem(\"token\");\r\n  }, []);\r\n  const loginHandler = () => {\r\n    setLoading(true);\r\n    sessionStorage.setItem(\"email\", email);\r\n    firebase\r\n      .auth()\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then((data) => {\r\n        sessionStorage.setItem(\"token\", data.user.refreshToken);\r\n        firebase\r\n          .firestore()\r\n          .collection(\"safespace\")\r\n          .where(\"email\", \"==\", email)\r\n          .get()\r\n          .then((querySnapshot) => {\r\n            if (querySnapshot.size) {\r\n              querySnapshot.forEach((doc) => {\r\n                sessionStorage.setItem(\r\n                  \"data\",\r\n                  JSON.stringify({ name: doc.id, ...doc.data() })\r\n                );\r\n              });\r\n              history.push(\"/safespace\");\r\n            } else {\r\n              history.push(\"/entername\");\r\n            }\r\n            setLoading(false);\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        alert(error.message);\r\n        setLoading(false);\r\n      });\r\n  };\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.loginBox}>\r\n        <h1>Findhope</h1>\r\n        <Input\r\n          title=\"Email\"\r\n          value={email}\r\n          onChangeText={(event) => setEmail(event.target.value)}\r\n        />\r\n        <Input\r\n          title=\"Password\"\r\n          value={password}\r\n          onChangeText={(event) => setPassword(event.target.value)}\r\n        />\r\n        <Button title={loading ? \"\" : \"Login\"} onClick={loginHandler}>\r\n          {loading ? <Loader /> : null}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\n\r\nconst Spin = keyframes`\r\n0% { transform: rotate(0deg); }\r\n100% { transform: rotate(360deg); }\r\n`;\r\n\r\nconst Load = styled.div`\r\n  border: 6px solid #f3f3f3; /* Light grey */\r\n  border-top: 6px solid #3498db; /* Blue */\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  animation: ${Spin} 2s linear infinite;\r\n`;\r\n\r\nconst Loader = (props) => <Load style={props.style} />;\r\n\r\nexport default Loader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CreateProfile_wrapper__1wGnM\",\"loginBox\":\"CreateProfile_loginBox__2vRnL\"};"],"sourceRoot":""}