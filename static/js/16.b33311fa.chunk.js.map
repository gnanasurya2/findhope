{"version":3,"sources":["containers/Memberprofile.js","components/Loader.js","styles/CreateProfile.module.css"],"names":["MemberProfile","props","useState","loading","setLoading","paymentId","setPaymentId","db","firebase","firestore","history","useHistory","title","useParams","className","styles","wrapper","loginBox","value","onChangeText","event","target","onClick","collection","where","get","then","querySnapshot","console","log","size","forEach","doc","alert","fetch","response","json","data","statusCode","error","description","order_id","set","email","payment","push","catch","err","Spin","keyframes","Load","styled","div","Loader","style","module","exports"],"mappings":"kMA2EeA,UAnEO,SAACC,GAAW,IAAD,EACDC,oBAAS,GADR,mBACxBC,EADwB,KACfC,EADe,OAEGF,mBAAS,IAFZ,mBAExBG,EAFwB,KAEbC,EAFa,OAGPJ,qBAHO,mBAIzBK,GAJyB,UAIpBC,IAASC,aACdC,EAAUC,cACRC,EAAUC,cAAVD,MA4CR,OACE,yBAAKE,UAAWC,IAAOC,SACrB,yBAAKF,UAAWC,IAAOE,UACrB,+CACA,kBAAC,IAAD,CACEL,MAAM,aACNM,MAAOb,EACPc,aAAc,SAACC,GAAD,OAAWd,EAAac,EAAMC,OAAOH,UAErD,kBAAC,IAAD,CAAQN,MAAOT,EAAU,GAAK,OAAQmB,QApDvB,WACnBlB,GAAW,GACXG,EAAGgB,WAAW,YACXC,MAAM,UAAW,KAAMnB,GACvBoB,MACAC,MAAK,SAACC,GACLC,QAAQC,IAAIF,EAAcG,MACtBH,EAAcG,KAChBH,EAAcI,SAAQ,SAACC,GACrBC,MAAM,gCACN7B,GAAW,MAGb8B,MAAM,8DAAD,OAC2D7B,IAE7DqB,MAAK,SAACS,GAAD,OAAcA,EAASC,UAC5BV,MAAK,SAACW,GACLjC,GAAW,GACPiC,EAAKC,YACPL,MAAMI,EAAKE,MAAMC,aACjBlC,EAAa,KAEbC,EAAGgB,WAAW,YACXS,IAAIK,EAAKI,UACTC,IAAI,CACHC,MAAON,EAAKM,MACZC,QAASvC,IAEVqB,MAAK,kBAAMhB,EAAQmC,KAAK,iBAAmBjC,SAGjDkC,OAAM,SAACC,GACNd,MAAMc,EAAIR,MAAMC,aAChBpC,GAAW,SAIlB0C,OAAM,SAACC,GACNd,MAAMc,GACN3C,GAAW,QAaRD,EAAU,kBAAC,IAAD,MAAa,MAE1B,+D,kdCnER,IAAM6C,EAAOC,YAAH,KAKJC,EAAOC,IAAOC,IAAV,IAMKJ,GAKAK,IAFA,SAACpD,GAAD,OAAW,kBAACiD,EAAD,CAAMI,MAAOrD,EAAMqD,U,mBChB7CC,EAAOC,QAAU,CAAC,QAAU,+BAA+B,SAAW","file":"static/js/16.b33311fa.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport styles from \"../styles/CreateProfile.module.css\";\nimport Button from \"../components/PrimaryButton\";\nimport Loader from \"../components/Loader\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport firebase from \"../helpers/firebase\";\nimport Input from \"../components/Input\";\n\nconst MemberProfile = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [paymentId, setPaymentId] = useState(\"\");\n  const [data, setData] = useState();\n  const db = firebase.firestore();\n  const history = useHistory();\n  const { title } = useParams();\n  const ClickHandler = () => {\n    setLoading(true);\n    db.collection(\"payments\")\n      .where(\"payment\", \"==\", paymentId)\n      .get()\n      .then((querySnapshot) => {\n        console.log(querySnapshot.size);\n        if (querySnapshot.size) {\n          querySnapshot.forEach((doc) => {\n            alert(\"payment_id is already in use\");\n            setLoading(false);\n          });\n        } else {\n          fetch(\n            `https://limitless-springs-02261.herokuapp.com/api/payments/${paymentId}`\n          )\n            .then((response) => response.json())\n            .then((data) => {\n              setLoading(false);\n              if (data.statusCode) {\n                alert(data.error.description);\n                setPaymentId(\"\");\n              } else {\n                db.collection(\"payments\")\n                  .doc(data.order_id)\n                  .set({\n                    email: data.email,\n                    payment: paymentId,\n                  })\n                  .then(() => history.push(\"/profilemaker/\" + title));\n              }\n            })\n            .catch((err) => {\n              alert(err.error.description);\n              setLoading(false);\n            });\n        }\n      })\n      .catch((err) => {\n        alert(err);\n        setLoading(false);\n      });\n  };\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.loginBox}>\n        <h1>Payment details</h1>\n        <Input\n          title=\"Payment Id\"\n          value={paymentId}\n          onChangeText={(event) => setPaymentId(event.target.value)}\n        />\n        <Button title={loading ? \"\" : \"Next\"} onClick={ClickHandler}>\n          {loading ? <Loader /> : null}\n        </Button>\n        <p>payment ID is sent in email </p>\n      </div>\n    </div>\n  );\n};\nexport default MemberProfile;\n","import React from \"react\";\nimport styled, { keyframes } from \"styled-components\";\n\nconst Spin = keyframes`\n0% { transform: rotate(0deg); }\n100% { transform: rotate(360deg); }\n`;\n\nconst Load = styled.div`\n  border: 6px solid #f3f3f3; /* Light grey */\n  border-top: 6px solid #3498db; /* Blue */\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  animation: ${Spin} 2s linear infinite;\n`;\n\nconst Loader = (props) => <Load style={props.style} />;\n\nexport default Loader;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CreateProfile_wrapper__2jkHX\",\"loginBox\":\"CreateProfile_loginBox__1vb9P\"};"],"sourceRoot":""}