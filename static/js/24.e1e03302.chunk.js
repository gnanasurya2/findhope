(this.webpackJsonpfindhope=this.webpackJsonpfindhope||[]).push([[24],{121:function(e,t,n){e.exports={wrapper:"ImageCropper_wrapper__1nCsw",preview:"ImageCropper_preview__2OrzB"}},148:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(12),i=n(0),c=n.n(i),u=n(32),l=n.n(u),o=n(2),s=n(30),h=n(120),d=n.n(h),f=n(121),m=n.n(f),g=(n(122),n(28)),p=n(27),v=function(e){var t,n,a=Object(i.useState)(),u=Object(r.a)(a,2),l=u[0],o=u[1],s=Object(i.useRef)(null),h=Object(i.useRef)(null),f=Object(i.useState)({unit:"px",width:100,aspect:1}),v=Object(r.a)(f,2),b=v[0],w=v[1],O=Object(i.useState)(null),j=Object(r.a)(O,2),E=j[0],C=j[1],S=Object(i.useState)(null),x=Object(r.a)(S,2),I=x[0],N=x[1];Object(i.useEffect)((function(){g.a.then((function(e){return N(e)}))}),[]),Object(i.useEffect)((function(){if(E&&h.current&&s.current){var e=s.current,t=h.current,n=E,a=e.naturalWidth/e.width,r=e.naturalHeight/e.height,i=t.getContext("2d");t.width=4*n.width,t.height=4*n.height,i.setTransform(4,0,0,4,0,0),i.imageSmoothingEnabled=!1,i.drawImage(e,n.x*a,n.y*r,n.width*a,n.height*r,0,0,n.width,n.height)}}),[E]);var k=function(t,n){n&&t&&function(e,t,n){var a=document.createElement("canvas");return a.width=t,a.height=n,a.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),a}(t,n.width,n.height).toBlob((function(t){var n=I.storage().ref().child(e.name+".png");n.put(t).then((function(t){n.getDownloadURL().then((function(t){return e.submit(t)}))}))}),"image/png",1)},_=Object(i.useCallback)((function(e){return s.current=e}),[]);return c.a.createElement("div",{className:m.a.wrapper},c.a.createElement("div",null,c.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return o(t.result)})),t.readAsDataURL(e.target.files[0])}}})),c.a.createElement(d.a,{src:l,onImageLoaded:_,crop:b,onChange:function(e){return w(e)},onComplete:function(e){return C(e)}}),(null===E||void 0===E?void 0:E.width)||(null===E||void 0===E?void 0:E.height)?c.a.createElement("div",{className:m.a.preview,style:{width:E.width,height:E.height}},c.a.createElement("canvas",{ref:h,style:{width:null!==(t=null===E||void 0===E?void 0:E.width)&&void 0!==t?t:0,height:null!==(n=null===E||void 0===E?void 0:E.height)&&void 0!==n?n:0}})):null,(null===E||void 0===E?void 0:E.width)||(null===E||void 0===E?void 0:E.height)?c.a.createElement(p.a,{type:"button",onClick:function(){return k(h.current,E)}},"Upload"):null)};t.default=function(e){var t=Object(i.useState)(!1),n=Object(r.a)(t,2),u=n[0],h=n[1],d=Object(i.useState)(""),f=Object(r.a)(d,2),m=f[0],b=f[1],w=Object(i.useState)(!1),O=Object(r.a)(w,2),j=O[0],E=O[1],C=Object(i.useState)(null),S=Object(r.a)(C,2),x=S[0],I=S[1],N=Object(o.h)().title,k=Object(o.g)();Object(i.useEffect)((function(){g.a.then((function(e){return I(e.firestore())}))}),[]);var _=function(e){if(j){var t=JSON.parse(sessionStorage.getItem("data"));x.collection("safespace").doc(t.name.toLowerCase()).update({members:[].concat(Object(a.a)(t.members),[{role:N,name:m,url:e}])}).then((function(){return k.push("/safespace")})).catch((function(e){return alert(e.message)}))}else{if(!m.length)return void alert("Enter the name");E(!0)}};return Object(i.useEffect)((function(){sessionStorage.getItem("token")||h(!0)}),[]),c.a.createElement("div",{className:l.a.wrapper},u?c.a.createElement(o.a,{to:"/login"}):null,c.a.createElement("div",{className:l.a.imageUploader},j?c.a.createElement(v,{submit:_,name:m}):c.a.createElement("div",{className:l.a.flex},c.a.createElement(s.a,{title:"enter the name",value:m,onChangeText:function(e){return b(e.target.value)}}),c.a.createElement(p.a,{title:"Next",onClick:_}))))}}}]);
//# sourceMappingURL=24.e1e03302.chunk.js.map