{"version":3,"sources":["containers/Memberprofile.js","components/Loader.js","styles/CreateProfile.module.css"],"names":["MemberProfile","props","useState","loading","setLoading","paymentId","setPaymentId","db","setDb","history","useHistory","title","useParams","useEffect","firebase","then","firestore","className","styles","wrapper","loginBox","value","onChangeText","event","target","onClick","collection","where","get","querySnapshot","console","log","size","forEach","doc","alert","fetch","response","json","data","statusCode","error","description","order_id","set","email","payment","push","catch","err","Spin","keyframes","Load","styled","div","Loader","style","module","exports"],"mappings":"kMA2EeA,UAnEO,SAACC,GAAW,IAAD,EACDC,oBAAS,GADR,mBACxBC,EADwB,KACfC,EADe,OAEGF,mBAAS,IAFZ,mBAExBG,EAFwB,KAEbC,EAFa,OAGXJ,mBAAS,MAHE,mBAGxBK,EAHwB,KAGpBC,EAHoB,KAIzBC,EAAUC,cACRC,EAAUC,cAAVD,MACRE,qBAAU,kBAAMC,IAASC,MAAK,SAACD,GAAD,OAAcN,EAAMM,EAASE,kBAAe,IA4C1E,OACE,yBAAKC,UAAWC,IAAOC,SACrB,yBAAKF,UAAWC,IAAOE,UACrB,+CACA,kBAAC,IAAD,CACET,MAAM,aACNU,MAAOhB,EACPiB,aAAc,SAACC,GAAD,OAAWjB,EAAaiB,EAAMC,OAAOH,UAErD,kBAAC,IAAD,CAAQV,MAAOR,EAAU,GAAK,OAAQsB,QApDvB,WACnBrB,GAAW,GACXG,EAAGmB,WAAW,YACXC,MAAM,UAAW,KAAMtB,GACvBuB,MACAb,MAAK,SAACc,GACLC,QAAQC,IAAIF,EAAcG,MACtBH,EAAcG,KAChBH,EAAcI,SAAQ,SAACC,GACrBC,MAAM,gCACN/B,GAAW,MAGbgC,MAAM,8DAAD,OAC2D/B,IAE7DU,MAAK,SAACsB,GAAD,OAAcA,EAASC,UAC5BvB,MAAK,SAACwB,GACLnC,GAAW,GACPmC,EAAKC,YACPL,MAAMI,EAAKE,MAAMC,aACjBpC,EAAa,KAEbC,EAAGmB,WAAW,YACXQ,IAAIK,EAAKI,UACTC,IAAI,CACHC,MAAON,EAAKM,MACZC,QAASzC,IAEVU,MAAK,kBAAMN,EAAQsC,KAAK,iBAAmBpC,SAGjDqC,OAAM,SAACC,GACNd,MAAMc,EAAIR,MAAMC,aAChBtC,GAAW,SAIlB4C,OAAM,SAACC,GACNd,MAAMc,GACN7C,GAAW,QAaRD,EAAU,kBAAC,IAAD,MAAa,MAE1B,+D,kdCnER,IAAM+C,EAAOC,YAAH,KAKJC,EAAOC,IAAOC,IAAV,IAMKJ,GAKAK,IAFA,SAACtD,GAAD,OAAW,kBAACmD,EAAD,CAAMI,MAAOvD,EAAMuD,U,mBChB7CC,EAAOC,QAAU,CAAC,QAAU,+BAA+B,SAAW","file":"static/js/17.ee683214.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styles from \"../styles/CreateProfile.module.css\";\r\nimport Button from \"../components/PrimaryButton\";\r\nimport Loader from \"../components/Loader\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport firebase from \"../helpers/firebase\";\r\nimport Input from \"../components/Input\";\r\n\r\nconst MemberProfile = (props) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [paymentId, setPaymentId] = useState(\"\");\r\n  const [db, setDb] = useState(null);\r\n  const history = useHistory();\r\n  const { title } = useParams();\r\n  useEffect(() => firebase.then((firebase) => setDb(firebase.firestore())), []);\r\n  const ClickHandler = () => {\r\n    setLoading(true);\r\n    db.collection(\"payments\")\r\n      .where(\"payment\", \"==\", paymentId)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        console.log(querySnapshot.size);\r\n        if (querySnapshot.size) {\r\n          querySnapshot.forEach((doc) => {\r\n            alert(\"payment_id is already in use\");\r\n            setLoading(false);\r\n          });\r\n        } else {\r\n          fetch(\r\n            `https://limitless-springs-02261.herokuapp.com/api/payments/${paymentId}`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              setLoading(false);\r\n              if (data.statusCode) {\r\n                alert(data.error.description);\r\n                setPaymentId(\"\");\r\n              } else {\r\n                db.collection(\"payments\")\r\n                  .doc(data.order_id)\r\n                  .set({\r\n                    email: data.email,\r\n                    payment: paymentId,\r\n                  })\r\n                  .then(() => history.push(\"/profilemaker/\" + title));\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              alert(err.error.description);\r\n              setLoading(false);\r\n            });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n        setLoading(false);\r\n      });\r\n  };\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.loginBox}>\r\n        <h1>Payment details</h1>\r\n        <Input\r\n          title=\"Payment Id\"\r\n          value={paymentId}\r\n          onChangeText={(event) => setPaymentId(event.target.value)}\r\n        />\r\n        <Button title={loading ? \"\" : \"Next\"} onClick={ClickHandler}>\r\n          {loading ? <Loader /> : null}\r\n        </Button>\r\n        <p>payment ID is sent in email </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default MemberProfile;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\n\r\nconst Spin = keyframes`\r\n0% { transform: rotate(0deg); }\r\n100% { transform: rotate(360deg); }\r\n`;\r\n\r\nconst Load = styled.div`\r\n  border: 6px solid #f3f3f3; /* Light grey */\r\n  border-top: 6px solid #3498db; /* Blue */\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  animation: ${Spin} 2s linear infinite;\r\n`;\r\n\r\nconst Loader = (props) => <Load style={props.style} />;\r\n\r\nexport default Loader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CreateProfile_wrapper__1wGnM\",\"loginBox\":\"CreateProfile_loginBox__2vRnL\"};"],"sourceRoot":""}