(this.webpackJsonpfindhope=this.webpackJsonpfindhope||[]).push([[23],{120:function(e,t,a){e.exports={wrapper:"ImageCropper_wrapper__2Hb3o",preview:"ImageCropper_preview__3e-GM"}},140:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(13),i=a(0),c=a.n(i),l=a(38),o=a.n(l),u=a(2),h=a(33),s=a(119),d=a.n(s),m=a(120),g=a.n(m),f=(a(121),a(32)),p=a(31),v=function(e){var t,a,n=Object(i.useState)(),l=Object(r.a)(n,2),o=l[0],u=l[1],h=Object(i.useRef)(null),s=Object(i.useRef)(null),m=Object(i.useState)({unit:"px",width:100,aspect:1}),v=Object(r.a)(m,2),b=v[0],w=v[1],O=Object(i.useState)(null),j=Object(r.a)(O,2),E=j[0],C=j[1];Object(i.useEffect)((function(){if(E&&s.current&&h.current){var e=h.current,t=s.current,a=E,n=e.naturalWidth/e.width,r=e.naturalHeight/e.height,i=t.getContext("2d");t.width=4*a.width,t.height=4*a.height,i.setTransform(4,0,0,4,0,0),i.imageSmoothingEnabled=!1,i.drawImage(e,a.x*n,a.y*r,a.width*n,a.height*r,0,0,a.width,a.height)}}),[E]);var S=function(t,a){a&&t&&function(e,t,a){var n=document.createElement("canvas");return n.width=t,n.height=a,n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,a),n}(t,a.width,a.height).toBlob((function(t){var a=f.a.storage().ref().child(e.name+".png");a.put(t).then((function(t){a.getDownloadURL().then((function(t){return e.submit(t)}))}))}),"image/png",1)},x=Object(i.useCallback)((function(e){return h.current=e}),[]);return c.a.createElement("div",{className:g.a.wrapper},c.a.createElement("div",null,c.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return u(t.result)})),t.readAsDataURL(e.target.files[0])}}})),c.a.createElement(d.a,{src:o,onImageLoaded:x,crop:b,onChange:function(e){return w(e)},onComplete:function(e){return C(e)}}),(null===E||void 0===E?void 0:E.width)||(null===E||void 0===E?void 0:E.height)?c.a.createElement("div",{className:g.a.preview,style:{width:E.width,height:E.height}},c.a.createElement("canvas",{ref:s,style:{width:null!==(t=null===E||void 0===E?void 0:E.width)&&void 0!==t?t:0,height:null!==(a=null===E||void 0===E?void 0:E.height)&&void 0!==a?a:0}})):null,(null===E||void 0===E?void 0:E.width)||(null===E||void 0===E?void 0:E.height)?c.a.createElement(p.a,{type:"button",onClick:function(){return S(s.current,E)}},"Upload"):null)};t.default=function(e){var t=Object(i.useState)(!1),a=Object(r.a)(t,2),l=a[0],s=a[1],d=Object(i.useState)(""),m=Object(r.a)(d,2),g=m[0],b=m[1],w=Object(i.useState)(!1),O=Object(r.a)(w,2),j=O[0],E=O[1],C=Object(u.h)().title,S=f.a.firestore(),x=Object(u.g)(),I=function(e){if(j){var t=JSON.parse(sessionStorage.getItem("data"));S.collection("safespace").doc(t.name.toLowerCase()).update({members:[].concat(Object(n.a)(t.members),[{role:C,name:g,url:e}])}).then((function(){return x.push("/safespace")})).catch((function(e){return alert(e.message)}))}else{if(!g.length)return void alert("Enter the name");E(!0)}};return Object(i.useEffect)((function(){sessionStorage.getItem("token")||s(!0)}),[]),c.a.createElement("div",{className:o.a.wrapper},l?c.a.createElement(u.a,{to:"/login"}):null,c.a.createElement("div",{className:o.a.imageUploader},j?c.a.createElement(v,{submit:I,name:g}):c.a.createElement("div",{className:o.a.flex},c.a.createElement(h.a,{title:"enter the name",value:g,onChangeText:function(e){return b(e.target.value)}}),c.a.createElement(p.a,{title:"Next",onClick:I}))))}}}]);
//# sourceMappingURL=23.1d339d84.chunk.js.map