{"version":3,"sources":["containers/CreateProfile.js","styles/CreateProfile.module.css"],"names":["CreateProfile","props","useState","paymentId","setPaymentId","paymentData","setPaymentData","name","setName","password","setPassword","confirmPassword","setConfirmPassword","redirect","setRedirect","db","firebase","firestore","className","styles","wrapper","loginBox","to","title","value","onChangeText","event","target","onClick","length","alert","auth","createUserWithEmailAndPassword","then","data","collection","doc","order_id","set","email","payment","catch","error","message","where","get","querySnapshot","size","forEach","fetch","response","json","statusCode","description","err","console","log","module","exports"],"mappings":"0LAyGeA,UAlGO,SAACC,GAAW,IAAD,EACGC,mBAAS,IADZ,mBACxBC,EADwB,KACbC,EADa,OAEOF,mBAAS,MAFhB,mBAExBG,EAFwB,KAEXC,EAFW,OAGPJ,mBAAS,IAHF,mBAGxBK,EAHwB,KAGlBC,EAHkB,OAICN,mBAAS,IAJV,mBAIxBO,EAJwB,KAIdC,EAJc,OAKeR,mBAAS,IALxB,mBAKxBS,EALwB,KAKPC,EALO,OAMCV,oBAAS,GANV,mBAMxBW,EANwB,KAMdC,EANc,KAOzBC,EAAKC,IAASC,YAkDpB,OACE,yBAAKC,UAAWC,IAAOC,SACrB,yBAAKF,UAAWC,IAAOE,UACpBR,EAAW,kBAAC,IAAD,CAAUS,GAAG,WAAc,KACtCjB,EACC,oCACE,8CACA,kBAAC,IAAD,CACEkB,MAAM,QACNC,MAAOjB,EACPkB,aAAc,SAACC,GAAD,OAAWlB,EAAQkB,EAAMC,OAAOH,UAEhD,kBAAC,IAAD,CACED,MAAM,WACNC,MAAOf,EACPgB,aAAc,SAACC,GAAD,OAAWhB,EAAYgB,EAAMC,OAAOH,UAEpD,kBAAC,IAAD,CACED,MAAM,mBACNC,MAAOb,EACPc,aAAc,SAACC,GAAD,OAAWd,EAAmBc,EAAMC,OAAOH,UAE3D,kBAAC,IAAD,CAAQD,MAAM,UAAUK,QA5CZ,WAChBnB,EAASoB,OAAS,EACpBC,MAAM,yCACGrB,IAAaE,EACtBmB,MAAM,yBAENd,IACGe,OACAC,+BAA+BzB,EAAME,GACrCwB,MAAK,SAACC,GACLnB,EAAGoB,WAAW,YACXC,IAAI/B,EAAYgC,UAChBC,IAAI,CACHC,MAAOhC,EACPiC,QAASrC,IAEV8B,MAAK,kBAAMnB,GAAY,SAE3B2B,OAAM,SAACC,GAAD,OAAWZ,MAAMY,EAAMC,gBA6B5B,oCACE,8CACA,kBAAC,IAAD,CACEpB,MAAM,aACNC,MAAOrB,EACPsB,aAAc,SAACC,GAAD,OAAWtB,EAAasB,EAAMC,OAAOH,UAErD,2DACA,kBAAC,IAAD,CAAQD,MAAM,OAAOK,QAlFR,WACrBb,EAAGoB,WAAW,YACXS,MAAM,UAAW,KAAMzC,GACvB0C,MACAZ,MAAK,SAACa,GACDA,EAAcC,KAChBD,EAAcE,SAAQ,SAACZ,GACrBN,MAAM,mCAGRmB,MAAM,sCAAD,OAAuC9C,IACzC8B,MAAK,SAACiB,GAAD,OAAcA,EAASC,UAC5BlB,MAAK,SAACC,GACDA,EAAKkB,WACPtB,MAAMI,EAAKQ,MAAMW,aAEjB/C,EAAe4B,MAGlBO,OAAM,SAACa,GAAD,OAASC,QAAQC,IAAIF,EAAIZ,MAAMW,mBAG3CZ,OAAM,SAACa,GACNxB,MAAMwB,c,mBCrCdG,EAAOC,QAAU,CAAC,QAAU,+BAA+B,SAAW","file":"static/js/19.fad11a5c.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport styles from \"../styles/CreateProfile.module.css\";\nimport Input from \"../components/Input\";\nimport Button from \"../components/PrimaryButton\";\nimport firebase from \"../helpers/firebase\";\nimport { Redirect } from \"react-router-dom\";\n\nconst CreateProfile = (props) => {\n  const [paymentId, setPaymentId] = useState(\"\");\n  const [paymentData, setPaymentData] = useState(null);\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [redirect, setRedirect] = useState(false);\n  const db = firebase.firestore();\n  const paymentHandler = () => {\n    db.collection(\"payments\")\n      .where(\"payment\", \"==\", paymentId)\n      .get()\n      .then((querySnapshot) => {\n        if (querySnapshot.size) {\n          querySnapshot.forEach((doc) => {\n            alert(\"payment_id is already in use\");\n          });\n        } else {\n          fetch(`http://localhost:8000/api/payments/${paymentId}`)\n            .then((response) => response.json())\n            .then((data) => {\n              if (data.statusCode) {\n                alert(data.error.description);\n              } else {\n                setPaymentData(data);\n              }\n            })\n            .catch((err) => console.log(err.error.description));\n        }\n      })\n      .catch((err) => {\n        alert(err);\n      });\n  };\n\n  const signUphandler = () => {\n    if (password.length < 6) {\n      alert(\"password must be atleast 6 characters\");\n    } else if (password !== confirmPassword) {\n      alert(\"passwords don't match\");\n    } else {\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(name, password)\n        .then((data) => {\n          db.collection(\"payments\")\n            .doc(paymentData.order_id)\n            .set({\n              email: name,\n              payment: paymentId,\n            })\n            .then(() => setRedirect(true));\n        })\n        .catch((error) => alert(error.message));\n    }\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.loginBox}>\n        {redirect ? <Redirect to=\"/login\" /> : null}\n        {paymentData ? (\n          <>\n            <h1>Create Profile</h1>\n            <Input\n              title=\"Email\"\n              value={name}\n              onChangeText={(event) => setName(event.target.value)}\n            />\n            <Input\n              title=\"Password\"\n              value={password}\n              onChangeText={(event) => setPassword(event.target.value)}\n            />\n            <Input\n              title=\"Confirm Password\"\n              value={confirmPassword}\n              onChangeText={(event) => setConfirmPassword(event.target.value)}\n            />\n            <Button title=\"Sign Up\" onClick={signUphandler} />\n          </>\n        ) : (\n          <>\n            <h1>Create Profile</h1>\n            <Input\n              title=\"payment Id\"\n              value={paymentId}\n              onChangeText={(event) => setPaymentId(event.target.value)}\n            />\n            <p>payment ID is sent in email </p>\n            <Button title=\"Next\" onClick={paymentHandler} />\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CreateProfile;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CreateProfile_wrapper__2jkHX\",\"loginBox\":\"CreateProfile_loginBox__1vb9P\"};"],"sourceRoot":""}