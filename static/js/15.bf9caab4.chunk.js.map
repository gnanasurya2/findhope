{"version":3,"sources":["containers/CreateProfile.js","components/Loader.js","styles/CreateProfile.module.css"],"names":["CreateProfile","props","useState","paymentId","setPaymentId","paymentData","setPaymentData","name","setName","password","setPassword","confirmPassword","setConfirmPassword","redirect","setRedirect","loading","setLoading","Firebase","setFirebase","db","setDb","useEffect","firebase","then","firestore","className","styles","wrapper","loginBox","to","title","value","onChangeText","event","target","onClick","length","alert","auth","createUserWithEmailAndPassword","data","collection","doc","order_id","set","email","payment","catch","error","message","where","get","querySnapshot","size","forEach","fetch","response","json","statusCode","description","err","Spin","keyframes","Load","styled","div","Loader","style","module","exports"],"mappings":"kMA+HeA,UAvHO,SAACC,GAAW,IAAD,EACGC,mBAAS,IADZ,mBACxBC,EADwB,KACbC,EADa,OAEOF,mBAAS,MAFhB,mBAExBG,EAFwB,KAEXC,EAFW,OAGPJ,mBAAS,IAHF,mBAGxBK,EAHwB,KAGlBC,EAHkB,OAICN,mBAAS,IAJV,mBAIxBO,EAJwB,KAIdC,EAJc,OAKeR,mBAAS,IALxB,mBAKxBS,EALwB,KAKPC,EALO,OAMCV,oBAAS,GANV,mBAMxBW,EANwB,KAMdC,EANc,OAODZ,oBAAS,GAPR,mBAOxBa,EAPwB,KAOfC,EAPe,OAQCd,mBAAS,MARV,mBAQxBe,EARwB,KAQdC,EARc,OASXhB,mBAAS,MATE,mBASxBiB,EATwB,KASpBC,EAToB,KAU/BC,qBAAU,WACRC,IAASC,MAAK,SAACD,GACbF,EAAME,EAASE,aACfN,EAAYI,QAEb,IA2DH,OACE,yBAAKG,UAAWC,IAAOC,SACrB,yBAAKF,UAAWC,IAAOE,UACpBf,EAAW,kBAAC,IAAD,CAAUgB,GAAG,WAAc,KACtCxB,EACC,oCACE,8CACA,kBAAC,IAAD,CACEyB,MAAM,QACNC,MAAOxB,EACPyB,aAAc,SAACC,GAAD,OAAWzB,EAAQyB,EAAMC,OAAOH,UAEhD,kBAAC,IAAD,CACED,MAAM,WACNC,MAAOtB,EACPuB,aAAc,SAACC,GAAD,OAAWvB,EAAYuB,EAAMC,OAAOH,UAEpD,kBAAC,IAAD,CACED,MAAM,mBACNC,MAAOpB,EACPqB,aAAc,SAACC,GAAD,OAAWrB,EAAmBqB,EAAMC,OAAOH,UAE3D,kBAAC,IAAD,CAAQD,MAAOf,EAAU,GAAK,UAAWoB,QA3C7B,WAChB1B,EAAS2B,OAAS,EACpBC,MAAM,yCACG5B,IAAaE,EACtB0B,MAAM,yBAENpB,EAASqB,OACNC,+BAA+BhC,EAAME,GACrCc,MAAK,SAACiB,GACLrB,EAAGsB,WAAW,YACXC,IAAIrC,EAAYsC,UAChBC,IAAI,CACHC,MAAOtC,EACPuC,QAAS3C,IAEVoB,MAAK,kBAAMT,GAAY,SAE3BiC,OAAM,SAACC,GAAD,OAAWX,MAAMW,EAAMC,cA2BvBlC,EAAU,kBAAC,IAAD,MAAa,OAI5B,oCACE,8CACA,kBAAC,IAAD,CACEe,MAAM,aACNC,MAAO5B,EACP6B,aAAc,SAACC,GAAD,OAAW7B,EAAa6B,EAAMC,OAAOH,UAErD,2DACA,kBAAC,IAAD,CAAQD,MAAOf,EAAU,GAAK,OAAQoB,QA5FzB,WACrBnB,GAAW,GACXG,EAAGsB,WAAW,YACXS,MAAM,UAAW,KAAM/C,GACvBgD,MACA5B,MAAK,SAAC6B,GACDA,EAAcC,KAChBD,EAAcE,SAAQ,SAACZ,GACrBL,MAAM,gCACNrB,GAAW,MAGbuC,MAAM,8DAAD,OAC2DpD,IAE7DoB,MAAK,SAACiC,GAAD,OAAcA,EAASC,UAC5BlC,MAAK,SAACiB,GACLxB,GAAW,GACPwB,EAAKkB,WACPrB,MAAMG,EAAKQ,MAAMW,aAEjBrD,EAAekC,MAGlBO,OAAM,SAACa,GACNvB,MAAMuB,EAAIZ,MAAMW,aAChB3C,GAAW,SAIlB+B,OAAM,SAACa,GACNvB,MAAMuB,GACN5C,GAAW,QA6DJD,EAAU,kBAAC,IAAD,MAAa,W,kdCnHtC,IAAM8C,EAAOC,YAAH,KAKJC,EAAOC,IAAOC,IAAV,IAMKJ,GAKAK,IAFA,SAACjE,GAAD,OAAW,kBAAC8D,EAAD,CAAMI,MAAOlE,EAAMkE,U,mBChB7CC,EAAOC,QAAU,CAAC,QAAU,+BAA+B,SAAW","file":"static/js/15.bf9caab4.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styles from \"../styles/CreateProfile.module.css\";\r\nimport Input from \"../components/Input\";\r\nimport Button from \"../components/PrimaryButton\";\r\nimport firebase from \"../helpers/firebase\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Loader from \"../components/Loader\";\r\n\r\nconst CreateProfile = (props) => {\r\n  const [paymentId, setPaymentId] = useState(\"\");\r\n  const [paymentData, setPaymentData] = useState(null);\r\n  const [name, setName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [Firebase, setFirebase] = useState(null);\r\n  const [db, setDb] = useState(null);\r\n  useEffect(() => {\r\n    firebase.then((firebase) => {\r\n      setDb(firebase.firestore());\r\n      setFirebase(firebase);\r\n    });\r\n  }, []);\r\n\r\n  const paymentHandler = () => {\r\n    setLoading(true);\r\n    db.collection(\"payments\")\r\n      .where(\"payment\", \"==\", paymentId)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        if (querySnapshot.size) {\r\n          querySnapshot.forEach((doc) => {\r\n            alert(\"payment_id is already in use\");\r\n            setLoading(false);\r\n          });\r\n        } else {\r\n          fetch(\r\n            `https://limitless-springs-02261.herokuapp.com/api/payments/${paymentId}`\r\n          )\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n              setLoading(false);\r\n              if (data.statusCode) {\r\n                alert(data.error.description);\r\n              } else {\r\n                setPaymentData(data);\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              alert(err.error.description);\r\n              setLoading(false);\r\n            });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        alert(err);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const signUphandler = () => {\r\n    if (password.length < 6) {\r\n      alert(\"password must be atleast 6 characters\");\r\n    } else if (password !== confirmPassword) {\r\n      alert(\"passwords don't match\");\r\n    } else {\r\n      Firebase.auth()\r\n        .createUserWithEmailAndPassword(name, password)\r\n        .then((data) => {\r\n          db.collection(\"payments\")\r\n            .doc(paymentData.order_id)\r\n            .set({\r\n              email: name,\r\n              payment: paymentId,\r\n            })\r\n            .then(() => setRedirect(true));\r\n        })\r\n        .catch((error) => alert(error.message));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <div className={styles.loginBox}>\r\n        {redirect ? <Redirect to=\"/login\" /> : null}\r\n        {paymentData ? (\r\n          <>\r\n            <h1>Create Profile</h1>\r\n            <Input\r\n              title=\"Email\"\r\n              value={name}\r\n              onChangeText={(event) => setName(event.target.value)}\r\n            />\r\n            <Input\r\n              title=\"Password\"\r\n              value={password}\r\n              onChangeText={(event) => setPassword(event.target.value)}\r\n            />\r\n            <Input\r\n              title=\"Confirm Password\"\r\n              value={confirmPassword}\r\n              onChangeText={(event) => setConfirmPassword(event.target.value)}\r\n            />\r\n            <Button title={loading ? \"\" : \"Sign Up\"} onClick={signUphandler}>\r\n              {loading ? <Loader /> : null}\r\n            </Button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <h1>Create Profile</h1>\r\n            <Input\r\n              title=\"payment Id\"\r\n              value={paymentId}\r\n              onChangeText={(event) => setPaymentId(event.target.value)}\r\n            />\r\n            <p>payment ID is sent in email </p>\r\n            <Button title={loading ? \"\" : \"Next\"} onClick={paymentHandler}>\r\n              {loading ? <Loader /> : null}\r\n            </Button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateProfile;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\n\r\nconst Spin = keyframes`\r\n0% { transform: rotate(0deg); }\r\n100% { transform: rotate(360deg); }\r\n`;\r\n\r\nconst Load = styled.div`\r\n  border: 6px solid #f3f3f3; /* Light grey */\r\n  border-top: 6px solid #3498db; /* Blue */\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  animation: ${Spin} 2s linear infinite;\r\n`;\r\n\r\nconst Loader = (props) => <Load style={props.style} />;\r\n\r\nexport default Loader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CreateProfile_wrapper__1wGnM\",\"loginBox\":\"CreateProfile_loginBox__2vRnL\"};"],"sourceRoot":""}